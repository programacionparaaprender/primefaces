<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>Crear Nuevo Estudiante</title>
    <style>
        .form-container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .form-title {
            color: #333;
            margin-bottom: 20px;
        }
        .form-buttons {
            margin-top: 20px;
            text-align: right;
        }
    </style>
</h:head>

<h:body>
    <div class="form-container">
    <h:form id="createForm" prependId="false">
    	<f:event type="preRenderView" listener="#{studentController.prepareCreate()}" />
        <h2 class="form-title">Crear Nuevo Estudiante</h2>
        <p:messages id="messages" showDetail="true" autoUpdate="true" />        
        <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-grid">
        <p:outputLabel for="firstName" value="Nombre:" />
        <p:inputText id="firstName" value="#{studentController.selectedStudent.firstName}" 
                   required="true" requiredMessage="El nombre es requerido" />
        <p:outputLabel for="lastName" value="Apellido:" />
        <p:inputText id="lastName" value="#{studentController.selectedStudent.lastName}" 
                   required="true" requiredMessage="El apellido es requerido" />
        <p:outputLabel for="email" value="Email:" />
        <p:inputText id="email" value="#{studentController.selectedStudent.email}" 
                   required="true" requiredMessage="El email es requerido" />
        </p:panelGrid>

        <div class="form-buttons">
              <p:commandButton value="Guardar" action="#{studentController.addStudent}" 
                             update="messages" process="@form" icon="pi pi-save"
                             oncomplete="if(!args.validationFailed) window.location.href='list-students.xhtml?faces-redirect=true'" />
                             
              <p:commandButton value="Cancelar" immediate="true" 
                             action="#{studentController.loadStudents}"
                             outcome="list-students?faces-redirect=true" 
                             icon="pi pi-times" styleClass="ui-button-secondary" />
          </div>
      </h:form>
    </div>
</h:body>
</html>